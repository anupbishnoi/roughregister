</textarea>
    </form>
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/bootstrap-markdown.js"></script>
    <script src="../js/jquery.hotkeys.js"></script>
    <script src="../js/humane.js"></script>
    <script>
      // jQuery throttle / debounce - v1.1 - 3/7/2010
      (function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
    </script>
    <script>
      (function () {
        var el = $('#writebox');
        el.markdown({
          autofocus: true,
          savable: true,
          onSave: save,
          hiddenButtons: 'cmdPreview',
          additionalButtons: [
            [{
              name: "groupCustom",
              data: [{
                name: "cmdView",
                toggle: true,
                title: "View",
                icon: "glyphicon glyphicon-eye-open",
                callback: function(e){
                  window.open('.');
                }
              }]
            }]
          ]
        });
        var editor = el.data('markdown');
        editor.setFullscreen(true);
        editor.savedContent = editor.getContent();
        
        el.bind('keydown', 'ctrl+s', save);
        
        humane.baseCls = 'humane-libnotify';
        function save() {
          var content = editor.getContent();
          $.post('save', {
            content: content
          }, function () {
            editor.savedContent = content;
            humane.log('Saved');
          });
          return false;
        }
        
        $(window).on("beforeunload", function (e) {
          if (editor.getContent() === editor.savedContent) {
            return;
          }
          var confirmationMessage = "Unsaved changes!";
          (e || window.event).returnValue = confirmationMessage;
          return confirmationMessage;
        });
        
        $('body').animate({
          opacity: 1
        });
        
        var locationParts = location.href.split('/'),
          topicName = locationParts[locationParts.length - 2];
        $('title').text($('title').text() + ': ' + topicName);
        $('.title').text(topicName);
        
        $(window).resize($.throttle(100, function () {
          var maxWidth = 800,
            minPadding = 30,
            padding = Math.max(parseInt(($(window).width() - maxWidth) / 2, 10), minPadding);
          console.log(padding);
          $('#writebox').each(function () {
              this.style.setProperty('padding-left', padding + 'px', 'important');
              this.style.setProperty('padding-right', padding + 'px', 'important');
          });
        }));
      }());
    </script>
  </body>
</html>